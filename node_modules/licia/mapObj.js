var safeCb = require('./safeCb');
var keys = require('./keys');
var types = require('./types');

exports = function exports(obj, iterator, ctx) {
    iterator = safeCb(iterator, ctx);

    var _keys = keys(obj),
        len = _keys.length,
        ret = {};

    for (var i = 0; i < len; i++) {
        var curKey = _keys[i];
        ret[curKey] = iterator(obj[curKey], curKey, obj);
    }

    return ret;
};

module.exports = exports;
