var has = require('./has');

exports = function exports(fn, hashFn) {
    var memoize = function memoize(key) {
        var cache = memoize.cache,
            address = '' + (hashFn ? hashFn.apply(this, arguments) : key);
        if (!has(cache, address)) cache[address] = fn.apply(this, arguments);
        return cache[address];
    };

    memoize.cache = {};
    return memoize;
};

module.exports = exports;
