var Class = require('./Class');

exports = Class({
    initialize: function Stack() {
        this.clear();
    },
    clear: function clear() {
        this._items = [];
        this.size = 0;
    },
    push: function push(item) {
        this._items.push(item);

        return ++this.size;
    },
    pop: function pop() {
        this.size--;
        return this._items.pop();
    },
    peek: function peek() {
        return this._items[this.size - 1];
    },
    forEach: function forEach(iterator, ctx) {
        ctx = arguments.length > 1 ? ctx : this;
        var items = this._items;

        for (var i = this.size - 1, j = 0; i >= 0; i--, j++) {
            iterator.call(ctx, items[i], j, this);
        }
    },
    toArr: function toArr() {
        return this._items.slice(0).reverse();
    }
});

module.exports = exports;
