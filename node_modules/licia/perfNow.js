var now = require('./now');
var root = require('./root');

var performance = root.performance,
    process = root.process,
    loadTime;

if (performance && performance.now) {
    exports = function exports() {
        return performance.now();
    };
} else if (process && process.hrtime) {
    var getNanoSeconds = function getNanoSeconds() {
        var hr = process.hrtime();
        return hr[0] * 1e9 + hr[1];
    };

    loadTime = getNanoSeconds() - process.uptime() * 1e9;

    exports = function exports() {
        return (getNanoSeconds() - loadTime) / 1e6;
    };
} else {
    loadTime = now();

    exports = function exports() {
        return now() - loadTime;
    };
}

module.exports = exports;
