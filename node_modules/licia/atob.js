var root = require('./root');
var isNode = require('./isNode');
var base64 = require('./base64');
var map = require('./map');
var detectMocha = require('./detectMocha');

if (isNode) {
    exports = function exports(str) {
        return new Buffer(str, 'base64').toString('binary');
    };
} else {
    if (root.atob && !detectMocha()) {
        exports = root.atob;
    } else {
        exports = function exports(str) {
            return map(base64.decode(str), function(c) {
                return String.fromCharCode(c);
            }).join('');
        };
    }
}

module.exports = exports;
